<app-dashboard-layout>
  <div class="page-header">
    <h2>Quản lý cửa hàng</h2>
  </div>

  <div class="button-add-box">
    <div class="box-search">
      <input
        nz-input
        placeholder="Tìm kiếm cửa hàng"
        [(ngModel)]="searchText"
        (ngModelChange)="onSearch()"
      />
      <div class="search-box">
        <nz-icon nzType="search" nzTheme="outline" class="icon-search"></nz-icon>
      </div>
    </div>

    <button nz-button nzType="primary" (click)="navigateToCreate()">
      <nz-icon nzType="plus" nzTheme="outline" />
      Thêm cửa hàng
    </button>
  </div>

  <div>
    <nz-table
      #basicTable
      [nzData]="listOfData"
      [nzLoading]="loading"
      [nzShowPagination]="false"
      nzBordered
    >
      <thead>
        <tr>
          <th>ID</th>
          <th>Tên cửa hàng</th>
          <th>Số điện thoại</th>
          <th>Địa chỉ</th>
          <th>Trạng thái</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody>
        @for (data of basicTable.data; track data.id) {
          <tr>
            <td>
              <a (click)="navigateToEdit(data.id)">{{ data.id }}</a>
            </td>
            <td>{{ data.name }}</td>
            <td>{{ data.phone }}</td>
            <td>{{ data.address }}</td>
            <td>
              <nz-tag [nzColor]="data.isActive ? 'green' : 'red'">
                {{ data.isActive ? 'Hoạt động' : 'Tạm dừng' }}
              </nz-tag>
            </td>
            <td>
              <a (click)="navigateToEdit(data.id)">Sửa</a>
              <nz-divider nzType="vertical"></nz-divider>
              <a
                nz-popconfirm
                nzPopconfirmTitle="Bạn có chắc chắn muốn xóa cửa hàng này?"
                (nzOnConfirm)="delete(data.id)"
                class="text-danger"
              >
                Xóa
              </a>
            </td>
          </tr>
        }
      </tbody>
    </nz-table>
  </div>

  <div class="pagination">
    <nz-pagination
      [nzPageIndex]="pageIndex"
      [nzTotal]="total"
      [nzPageSize]="pageSize"
      [nzPageSizeOptions]="[10, 20, 50]"
      (nzPageIndexChange)="onPageChange($event)"
      (nzPageSizeChange)="onPageSizeChange($event)"
      [nzShowSizeChanger]="true"
    >
    </nz-pagination>
  </div>
</app-dashboard-layout>
