@if (isLoading) {
  <ngx-spinner [fullScreen]="true" type="ball-fussion" size="medium">
    <p style="color: white">Waiting for data....</p>
  </ngx-spinner>
} @else {
  <nz-layout [class.collapsed]="isCollapsed" [style.--sidebar-width.px]="sidebarWidth">
    <nz-sider
      nzCollapsible
      [(nzCollapsed)]="isCollapsed"
      [nzWidth]="sidebarWidth"
      [nzTrigger]="null"
    >
      @if (!isCollapsed) {
        <div
          class="sidebar-resizer"
          (mousedown)="startResizing($event)"
          [class.resizing]="isResizing"
        ></div>
      }

      <div class="sidebar-scroll-container">
        <a routerLink="/dashboard" class="logo-box">
          <img src="/logo.svg" alt="logo" class="logo" />
        </a>

        <ul nz-menu nzTheme="dark" nzMode="inline">
          @for (menu of menus; track menu.title) {
            @if (menu.children) {
              <li nz-submenu [nzTitle]="menu.title" [nzIcon]="menu.icon" [(nzOpen)]="menu.open">
                <ul>
                  @for (child of menu.children; track child.link) {
                    <li
                      nz-menu-item
                      [routerLink]="child.link"
                      [routerLinkActive]="'ant-menu-item-selected'"
                      [routerLinkActiveOptions]="{ exact: true }"
                    >
                      {{ child.title }}
                    </li>
                  }
                </ul>
              </li>
            } @else {
              <li
                nz-menu-item
                [routerLink]="menu.link"
                routerLinkActive="ant-menu-item-selected"
                [routerLinkActiveOptions]="{ exact: true }"
              >
                <nz-icon [nzType]="menu.icon" />
                <span>{{ menu.title }}</span>
              </li>
            }
          }
        </ul>
      </div>
    </nz-sider>

    <nz-layout>
      <nz-header>
        <div class="header">
          <nz-icon
            class="trigger"
            [nzType]="isCollapsed ? 'menu-unfold' : 'menu-fold'"
            (click)="isCollapsed = !isCollapsed"
          />

          <div>
            @if (user?.avatar) {
              <nz-avatar
                nzIcon="user"
                nzSrc="//zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
                nz-dropdown
                [nzDropdownMenu]="menu"
              />
            } @else {
              <nz-avatar
                nzText="U"
                style="color: #f56a00; background-color: #fde3cf"
                nz-dropdown
                [nzDropdownMenu]="menu"
              />
            }

            <nz-dropdown-menu #menu="nzDropdownMenu">
              <ul nz-menu nzSelectable>
                <li nz-menu-item>
                  <nz-icon nzType="user" class="mr-2"></nz-icon>
                  {{ user?.username }}
                </li>
                <li nz-menu-divider></li>
                <li nz-menu-item nzDanger>Đăng xuất</li>
              </ul>
            </nz-dropdown-menu>
          </div>
        </div>
      </nz-header>
      <nz-content>
        <nz-breadcrumb>
          @for (breadcrumb of listBreadcrumb; track breadcrumb) {
            <nz-breadcrumb-item>{{ breadcrumb }}</nz-breadcrumb-item>
          }
        </nz-breadcrumb>
        <div class="content">
          <ng-content></ng-content>
        </div>
      </nz-content>
      <nz-footer>Ant Design ©{{ date.getFullYear() }} Implement By Angular</nz-footer>
    </nz-layout>
  </nz-layout>
}
